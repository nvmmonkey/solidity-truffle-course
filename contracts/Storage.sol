// SPDX-License-Identifier: MIT
pragma solidity >=0.4.22 <0.9.0;

contract Storage {
    //total of 2^256-1 slot
    //each slot has 32bytes
    //indexing same like array/mapping, key & value pair

    //***V2 Storage Mapping */
    //keccak256(key . slot)
    mapping(uint => uint) public aa; //slot 0
    mapping(address => uint) public bb; //slot 1

    //***Dynamic Storage */
    //keccak256(slot) + index of the item
    uint[] public cc; // slot 2

    uint8 public a = 7; //1 byte
    uint16 public b = 10; //2 bytes
    address public c = 0xe3C05279aeA40E5fAC8bA9d1A8803D1707B1774b; //20 bytes
    bool d = true; //1 byte
    uint64 public e = 15; //8 bytes
    //32 bytes, all value stored in slot 3
    //truffle console
    //const instance = await Storage.deployed()
    //web3.eth.getStorageAt("0xC3754386b7FC994c0Eb4c049DAB7d75Da040d4f1", 3)
    //0x 000000000000000f 01 e3c05279aea40e5fac8ba9d1a8803d1707b1774b 000a 07

    uint256 public f = 200; //32 bytes --> slot 4
    //0x00000000000000000000000000000000000000000000000000000000000000 c8

    uint8 public g = 40; //1 bytes -> slot 5
    //0x00000000000000000000000000000000000000000000000000000000000000 28

    uint256 public h = 789; //32 bytes -> slot 6

    //0x000000000000000000000000000000000000000000000000000000000000 0315
    // *** Slot Optimization for Gas Consumption ***

    constructor() {
        cc.push(1); //index 0
        cc.push(10); //index 1 
        cc.push(100);//index 2 

        aa[2] = 4;
        aa[3] = 10;

        bb[0xe3C05279aeA40E5fAC8bA9d1A8803D1707B1774b] = 100;
    }
}

//access Storage Mapping using keccak256 for 128bytes

//access aa[2]
//0x00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000
//web3.eth.getStorageAt("0x256F1304b61752876A579f0066cC1b174eb60BC4", "0xabbb5caa7dda850e60932de0934eb1f9d0f59695050f761dc64e443e5030a569")

//access aa[3]
//0x00000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000000
//web3.eth.getStorageAt("0x256F1304b61752876A579f0066cC1b174eb60BC4", "0x101e368776582e57ab3d116ffe2517c0a585cd5b23174b01e275c2d8329c3d83")

//access bb[0xe3C05279aeA40E5fAC8bA9d1A8803D1707B1774b]
//0x000000000000000000000000e3C05279aeA40E5fAC8bA9d1A8803D1707B1774b0000000000000000000000000000000000000000000000000000000000000001 -> Slot 1
//web3.eth.getStorageAt("0x256F1304b61752876A579f0066cC1b174eb60BC4", "0x79fa91673a9f49d08ae4a386e4cc6f2dabfc7b01086c84083dc4f016fbcb9184")

//access cc[0] = 1
//0x0000000000000000000000000000000000000000000000000000000000000002
//web3.eth.getStorageAt("0xC71423d3617678e7a4cADac7213d70f7aB64118A","0x405787fa12a823e0f2b7631cc41b3ba8828b3321ca811111fa75cd3aa3bb5ace")

//access cc[1] = 10
//29102676481673041902632991033461445430619272659676223336789171408008386403022 + 1(index) = 29102676481673041902632991033461445430619272659676223336789171408008386403023
//0x405787FA12A823E0F2B7631CC41B3BA8828B3321CA811111FA75CD3AA3BB5ACF
//web3.eth.getStorageAt("0xC71423d3617678e7a4cADac7213d70f7aB64118A","0x405787FA12A823E0F2B7631CC41B3BA8828B3321CA811111FA75CD3AA3BB5ACF")

//access cc[2] = 100
//29102676481673041902632991033461445430619272659676223336789171408008386403022 + 1(index) = 29102676481673041902632991033461445430619272659676223336789171408008386403024
//0x405787FA12A823E0F2B7631CC41B3BA8828B3321CA811111FA75CD3AA3BB5AD0405787FA12A823E0F2B7631CC41B3BA8828B3321CA811111FA75CD3AA3BB5AD0
//web3.eth.getStorageAt("0xC71423d3617678e7a4cADac7213d70f7aB64118A","0x405787FA12A823E0F2B7631CC41B3BA8828B3321CA811111FA75CD3AA3BB5AD0405787FA12A823E0F2B7631CC41B3BA8828B3321CA811111FA75CD3AA3BB5AD0")